{% extends 'front/base.html' %}

{% block css_block %}
	<style type="text/css">
		body{
		    background:#eee;
		}
		h3 {
		    font-size: 16px;
		}
		.text-navy {
		    color: #1ab394;
		}
		.cart-product-imitation {
		  text-align: center;
		  padding-top: 30px;
		  height: 80px;
		  width: 80px;
		  background-color: #f8f8f9;
		}
		.product-imitation.xl {
		  padding: 120px 0;
		}
		.product-desc {
		  padding: 20px;
		  position: relative;
		}
		.ecommerce .tag-list {
		  padding: 0;
		}
		.ecommerce .fa-star {
		  color: #d1dade;
		}
		.ecommerce .fa-star.active {
		  color: #f8ac59;
		}
		.ecommerce .note-editor {
		  border: 1px solid #e7eaec;
		}
		table.shoping-cart-table {
		  margin-bottom: 0;
		}
		table.shoping-cart-table tr td {
		  border: none;
		  text-align: right;
		}
		table.shoping-cart-table tr td.desc,
		table.shoping-cart-table tr td:first-child {
		  text-align: left;
		}
		table.shoping-cart-table tr td:last-child {
		  width: 80px;
		}
		.ibox {
		  clear: both;
		  margin-bottom: 25px;
		  margin-top: 0;
		  padding: 0;
		}
		.ibox.collapsed .ibox-content {
		  display: none;
		}
		.ibox:after,
		.ibox:before {
		  display: table;
		}
		.ibox-title {
		  -moz-border-bottom-colors: none;
		  -moz-border-left-colors: none;
		  -moz-border-right-colors: none;
		  -moz-border-top-colors: none;
		  background-color: #ffffff;
		  border-color: #e7eaec;
		  border-image: none;
		  border-style: solid solid none;
		  border-width: 3px 0 0;
		  color: inherit;
		  margin-bottom: 0;
		  padding: 14px 15px 7px;
		  min-height: 48px;
		}
		.ibox-content {
		  background-color: #ffffff;
		  color: inherit;
		  padding: 15px 20px 20px 20px;
		  border-color: #e7eaec;
		  border-image: none;
		  border-style: solid solid none;
		  border-width: 1px 0;
		}
		.ibox-footer {
		  color: inherit;
		  border-top: 1px solid #e7eaec;
		  font-size: 90%;
		  background: #ffffff;
		  padding: 10px 15px;
		}


		/*   table css  */

		select.form-control:not([size]):not([multiple]) {
		    height: 44px;
		}
		select.form-control {
		    padding-right: 38px;
		    background-position: center right 17px;
		    background-image: url(data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvâ€¦9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K);
		    background-repeat: no-repeat;
		    background-size: 9px 9px;
		}
		.form-control:not(textarea) {
		    height: 44px;
		}
		.form-control {
		    padding: 0 18px 3px;
		    border: 1px solid #dbe2e8;
		    border-radius: 22px;
		    background-color: #fff;
		    color: #606975;
		    font-family: "Maven Pro",Helvetica,Arial,sans-serif;
		    font-size: 14px;
		    -webkit-appearance: none;
		    -moz-appearance: none;
		    appearance: none;
		}

		.shopping-cart,
		.wishlist-table,
		.order-table {
		    margin-bottom: 20px
		}

		.shopping-cart .table,
		.wishlist-table .table,
		.order-table .table {
		    margin-bottom: 0
		}

		.shopping-cart .btn,
		.wishlist-table .btn,
		.order-table .btn {
		    margin: 0
		}

		.shopping-cart>table>thead>tr>th,
		.shopping-cart>table>thead>tr>td,
		.shopping-cart>table>tbody>tr>th,
		.shopping-cart>table>tbody>tr>td,
		.wishlist-table>table>thead>tr>th,
		.wishlist-table>table>thead>tr>td,
		.wishlist-table>table>tbody>tr>th,
		.wishlist-table>table>tbody>tr>td,
		.order-table>table>thead>tr>th,
		.order-table>table>thead>tr>td,
		.order-table>table>tbody>tr>th,
		.order-table>table>tbody>tr>td {
		    vertical-align: middle !important
		}

		.shopping-cart>table thead th,
		.wishlist-table>table thead th,
		.order-table>table thead th {
		    padding-top: 17px;
		    padding-bottom: 17px;
		    border-width: 1px
		}

		.shopping-cart .remove-from-cart,
		.wishlist-table .remove-from-cart,
		.order-table .remove-from-cart {
		    display: inline-block;
		    color: #ff5252;
		    font-size: 18px;
		    line-height: 1;
		    text-decoration: none
		}

		.shopping-cart .count-input,
		.wishlist-table .count-input,
		.order-table .count-input {
		    display: inline-block;
		    width: 100%;
		    width: 86px
		}

		.shopping-cart .product-item,
		.wishlist-table .product-item,
		.order-table .product-item {
		    display: table;
		    width: 100%;
		    min-width: 150px;
		    margin-top: 5px;
		    margin-bottom: 3px
		}

		.shopping-cart .product-item .product-thumb,
		.shopping-cart .product-item .product-info,
		.wishlist-table .product-item .product-thumb,
		.wishlist-table .product-item .product-info,
		.order-table .product-item .product-thumb,
		.order-table .product-item .product-info {
		    display: table-cell;
		    vertical-align: top
		}

		.shopping-cart .product-item .product-thumb,
		.wishlist-table .product-item .product-thumb,
		.order-table .product-item .product-thumb {
		    width: 130px;
		    padding-right: 20px
		}

		.shopping-cart .product-item .product-thumb>img,
		.wishlist-table .product-item .product-thumb>img,
		.order-table .product-item .product-thumb>img {
		    display: block;
		    width: 100%
		}

		@media screen and (max-width: 860px) {
		    .shopping-cart .product-item .product-thumb,
		    .wishlist-table .product-item .product-thumb,
		    .order-table .product-item .product-thumb {
		        display: none
		    }
		}

		.shopping-cart .product-item .product-info span,
		.wishlist-table .product-item .product-info span,
		.order-table .product-item .product-info span {
		    display: block;
		    font-size: 13px
		}

		.shopping-cart .product-item .product-info span>em,
		.wishlist-table .product-item .product-info span>em,
		.order-table .product-item .product-info span>em {
		    font-weight: 500;
		    font-style: normal
		}

		.shopping-cart .product-item .product-title,
		.wishlist-table .product-item .product-title,
		.order-table .product-item .product-title {
		    margin-bottom: 6px;
		    padding-top: 5px;
		    font-size: 16px;
		    font-weight: 500
		}

		.shopping-cart .product-item .product-title>a,
		.wishlist-table .product-item .product-title>a,
		.order-table .product-item .product-title>a {
		    transition: color .3s;
		    color: #374250;
		    line-height: 1.5;
		    text-decoration: none
		}

		.shopping-cart .product-item .product-title>a:hover,
		.wishlist-table .product-item .product-title>a:hover,
		.order-table .product-item .product-title>a:hover {
		    color: #0da9ef
		}

		.shopping-cart .product-item .product-title small,
		.wishlist-table .product-item .product-title small,
		.order-table .product-item .product-title small {
		    display: inline;
		    margin-left: 6px;
		    font-weight: 500
		}

		.wishlist-table .product-item .product-thumb {
		    display: table-cell !important
		}

		@media screen and (max-width: 576px) {
		    .wishlist-table .product-item .product-thumb {
		        display: none !important
		    }
		}

		.shopping-cart-footer {
		    display: table;
		    width: 100%;
		    padding: 10px 0;
		    border-top: 1px solid #e1e7ec
		}

		.shopping-cart-footer>.column {
		    display: table-cell;
		    padding: 5px 0;
		    vertical-align: middle
		}

		.shopping-cart-footer>.column:last-child {
		    text-align: right
		}

		.shopping-cart-footer>.column:last-child .btn {
		    margin-right: 0;
		    margin-left: 15px
		}

		@media (max-width: 768px) {
		    .shopping-cart-footer>.column {
		        display: block;
		        width: 100%
		    }
		    .shopping-cart-footer>.column:last-child {
		        text-align: center
		    }
		    .shopping-cart-footer>.column .btn {
		        width: 100%;
		        margin: 12px 0 !important
		    }
		}

		.coupon-form .form-control {
		    display: inline-block;
		    width: 100%;
		    max-width: 235px;
		    margin-right: 12px;
		}

		.form-control-sm:not(textarea) {
		    height: 36px;
		}

		/*    Plus, Minus Button Clas     */

		.qty .plus {
	    	cursor: pointer;
	        display: inline-block;
	        vertical-align: top;
	        color: white;
	        width: 21px;
	        height: 21px;
	        font: 30px/1 Arial,sans-serif;
	        text-align: center;
	        border-radius: 50%;
	        line-height: 75%;
		}
		.qty .minus {
		    cursor: pointer;
		    display: inline-block;
		    vertical-align: top;
		    color: white;
		    width: 21px;
		    height: 21px;
		    font: 30px/1 Arial,sans-serif;
		    text-align: center;
		    border-radius: 50%;
		    background-clip: padding-box;
		    line-height: 60%;
		}

		.minus:hover{
		    background-color: #717fe0 !important;
		}
		.plus:hover{
		    background-color: #717fe0 !important;
		}
		
	</style>
{% endblock css_block %}

{% block content %}
	<div class="container">
	<div class="wrapper wrapper-content animated fadeInRight">
	    <div class="row">
	        <div class="col-md-9">
	            <div class="ibox">
	                <div class="ibox-title">
	                    <span class="pull-right total_item_cls">{% if success == True %} (<strong>{{ total_item }}</strong>) {% else %} (<strong>0</strong>) {% endif %} items</span>
	                    <h5>Items in your cart</h5>
	                </div>

	            <div class="ibox-content">
	                <div class="container padding-bottom-3x mb-1">
	                	{# {{ cart }} #}
	                	{% if success == False %}
	                    <!-- Alert-->
	                     <div class="alert alert-info alert-dismissible fade show text-center" style="margin-bottom: 30px;"><span class="alert-close" data-dismiss="alert"></span>&nbsp;&nbsp;Your Cart is empty. <strong>Continue Shopping</strong></div> 
	                    {% else %}

		                    {% if cart|length > 0 %}
			                    <!-- Shopping Cart-->
			                    <div class="table-responsive shopping-cart">
			                        <table class="table">
			                            <thead>
			                                <tr>
			                                    <th>Product Name</th>
			                                    <th class="text-center">Quantity</th>
			                                    <th class="text-center">Subtotal</th>
			                                    <th class="text-center">Discount</th>
			                                    <th class="text-center"><a class="btn btn-sm btn-outline-danger" href="#">Clear Cart</a></th>
			                                </tr>
			                            </thead>
			                            <tbody>
			                            	{% for key,value in cart.items %}
				                                <tr class="cart_row_{{ key }}">
				                                    <td>
				                                        <div class="product-item">
				                                            <a class="product-thumb" href="#"><img src="https://via.placeholder.com/220x180/FF0000/000000" alt="Product"></a>
				                                            <div class="product-info">
				                                                <h4 class="product-title"><a href="#">{{ value.product_name }}</a></h4>
				                                                <!-- <span><em>Size:</em> 10.5</span>
				                                                <span><em>Color:</em> Dark Blue</span> -->
				                                                <span><em>Price:</em> ${{ value.product_price|floatformat:2 }}</span>
				                                            </div>
				                                        </div>
				                                    </td>
				                                    <td class="text-center">
				                                        <div class="qty count-input">
				                                        	<span class="minus bg-danger quantity_desc" id="{{ key }}" title="Decrease Quantity">-</span>
				                                        	<input type="text" name="product_quantity" class="product_quantity_cls" product-id="{{ key }}" style="width: 40%;height: 24px;" value="{{ value.product_quantity }}" readonly="">
				                                        	<span class="plus bg-success quantity_inc" id="{{ key }}" title="Add Quantity">+</span>
				                                        </div>
				                                    </td>
				                                    <td class="text-center text-lg text-medium product_total_cls">${{ value.product_total|floatformat:2 }}</td>
				                                    <td class="text-center text-lg text-medium">$00.00</td>
				                                    <td class="text-center">
				                                    	<a class="remove-from-cart remove_cart_item" id="{{ key }}" href="#" data-toggle="tooltip" title="Remove Item from cart" data-original-title="Remove item"><i class="fa fa-trash"></i></a>
				                                    </td>
				                                </tr>
			                                {% endfor %}
			                            </tbody>
			                        </table>
			                    </div>
			                	
			                {% endif %}

		                    <div class="shopping-cart-footer">
		                        <div class="column">
		                            <form class="coupon-form" method="post">
		                                <input class="form-control form-control-sm" type="text" placeholder="Coupon code" required="">
		                                <button class="btn btn-outline-primary btn-sm" type="submit">Apply Coupon</button>
		                            </form>
		                        </div>
		                        <div class="column text-lg"><b>Total:</b> <span class="text-medium total_amount1">${{ total|floatformat:2 }}</span></div>
		                    </div>

	                    {% endif %}
	                    <!--<div class="shopping-cart-footer">
	                        <div class="column"><a class="btn btn-outline-secondary" href="#"><i class="icon-arrow-left"></i>&nbsp;Back to Shopping</a></div>
	                        <div class="column"><a class="btn btn-primary" href="#" data-toast="" data-toast-type="success" data-toast-position="topRight" data-toast-icon="icon-circle-check" data-toast-title="Your cart" data-toast-message="is updated successfully!">Update Cart</a><a class="btn btn-success" href="#">Checkout</a></div>
	                    </div> -->
	                </div>
	             </div>

	               <!-- <div class="ibox-content">
	                    <div class="table-responsive">
	                        <table class="table shoping-cart-table">
	                            <tbody>
	                            <tr>
	                                <td width="90">
	                                    <div class="cart-product-imitation">
	                                    </div>
	                                </td>
	                                <td class="desc">
	                                    <h3>
	                                    <a href="#" class="text-navy">
	                                        Desktop publishing software
	                                    </a>
	                                    </h3>
	                                    <p class="small">
	                                        It is a long established fact that a reader will be distracted by the readable
	                                        content of a page when looking at its layout. The point of using Lorem Ipsum is
	                                    </p>
	                                    <dl class="small m-b-none">
	                                        <dt>Description lists</dt>
	                                        <dd>A description list is perfect for defining terms.</dd>
	                                    </dl>

	                                    <div class="m-t-sm">
	                                        <a href="#" class="text-muted"><i class="fa fa-gift"></i> Add gift package</a>
	                                        |
	                                        <a href="#" class="text-muted"><i class="fa fa-trash"></i> Remove item</a>
	                                    </div>
	                                </td>

	                                <td>
	                                    $180,00
	                                    <s class="small text-muted">$230,00</s>
	                                </td>
	                                <td width="65">
	                                    <input type="text" class="form-control" placeholder="1">
	                                </td>
	                                <td>
	                                    <h4>
	                                        $180,00
	                                    </h4>
	                                </td>
	                            </tr>
	                            </tbody>
	                        </table>
	                    </div>

	                </div>
	                <div class="ibox-content">
	                    <div class="table-responsive">
	                        <table class="table shoping-cart-table">

	                            <tbody>
	                            <tr>
	                                <td width="90">
	                                    <div class="cart-product-imitation">
	                                    </div>
	                                </td>
	                                <td class="desc">
	                                    <h3>
	                                        <a href="#" class="text-navy">
	                                            Text editor
	                                        </a>
	                                    </h3>
	                                    <p class="small">
	                                        There are many variations of passages of Lorem Ipsum available
	                                    </p>
	                                    <dl class="small m-b-none">
	                                        <dt>Description lists</dt>
	                                        <dd>List is perfect for defining terms.</dd>
	                                    </dl>

	                                    <div class="m-t-sm">
	                                        <a href="#" class="text-muted"><i class="fa fa-gift"></i> Add gift package</a>
	                                        |
	                                        <a href="#" class="text-muted"><i class="fa fa-trash"></i> Remove item</a>
	                                    </div>
	                                </td>

	                                <td>
	                                    $50,00
	                                    <s class="small text-muted">$63,00</s>
	                                </td>
	                                <td width="65">
	                                    <input type="text" class="form-control" placeholder="2">
	                                </td>
	                                <td>
	                                    <h4>
	                                        $100,00
	                                    </h4>
	                                </td>

	                            </tr>
	                            </tbody>
	                        </table>
	                    </div>

	                </div>
	                <div class="ibox-content">
	                    <div class="table-responsive">
	                        <table class="table shoping-cart-table">

	                            <tbody>
	                            <tr>
	                                <td width="90">
	                                    <div class="cart-product-imitation">
	                                    </div>
	                                </td>
	                                <td class="desc">
	                                    <h3>
	                                        <a href="#" class="text-navy">
	                                            CRM software
	                                        </a>
	                                    </h3>
	                                    <p class="small">
	                                        Distracted by the readable
	                                        content of a page when looking at its layout. The point of using Lorem Ipsum is
	                                    </p>
	                                    <dl class="small m-b-none">
	                                        <dt>Description lists</dt>
	                                        <dd>A description list is perfect for defining terms.</dd>
	                                    </dl>

	                                    <div class="m-t-sm">
	                                        <a href="#" class="text-muted"><i class="fa fa-gift"></i> Add gift package</a>
	                                        |
	                                        <a href="#" class="text-muted"><i class="fa fa-trash"></i> Remove item</a>
	                                    </div>
	                                </td>

	                                <td>
	                                    $110,00
	                                </td>
	                                <td width="65">
	                                    <input type="text" class="form-control" placeholder="1">
	                                </td>
	                                <td>
	                                    <h4>
	                                        $110,00
	                                    </h4>
	                                </td>

	                            </tr>
	                            </tbody>
	                        </table>
	                    </div>

	                </div>
	                <div class="ibox-content">
	                    <div class="table-responsive">
	                        <table class="table shoping-cart-table">

	                            <tbody>
	                            <tr>
	                                <td width="90">
	                                    <div class="cart-product-imitation">
	                                    </div>
	                                </td>
	                                <td class="desc">
	                                    <h3>
	                                        <a href="#" class="text-navy">
	                                            PM software
	                                        </a>
	                                    </h3>
	                                    <p class="small">
	                                        Readable content of a page when looking at its layout. The point of using Lorem Ipsum is
	                                    </p>
	                                    <dl class="small m-b-none">
	                                        <dt>Description lists</dt>
	                                        <dd>A description list is perfect for defining terms.</dd>
	                                    </dl>

	                                    <div class="m-t-sm">
	                                        <a href="#" class="text-muted"><i class="fa fa-gift"></i> Add gift package</a>
	                                        |
	                                        <a href="#" class="text-muted"><i class="fa fa-trash"></i> Remove item</a>
	                                    </div>
	                                </td>

	                                <td>
	                                    $130,00
	                                </td>
	                                <td width="65">
	                                    <input type="text" class="form-control" placeholder="1">
	                                </td>
	                                <td>
	                                    <h4>
	                                        $130,00
	                                    </h4>
	                                </td>

	                            </tr>
	                            </tbody>
	                        </table>
	                    </div>

	                </div>
	                <div class="ibox-content">
	                    <div class="table-responsive">
	                        <table class="table shoping-cart-table">

	                            <tbody>
	                            <tr>
	                                <td width="90">
	                                    <div class="cart-product-imitation">
	                                    </div>
	                                </td>
	                                <td class="desc">
	                                    <h3>
	                                        <a href="#" class="text-navy">
	                                            Photo editor
	                                        </a>
	                                    </h3>
	                                    <p class="small">
	                                        Page when looking at its layout. The point of using Lorem Ipsum is
	                                    </p>
	                                    <dl class="small m-b-none">
	                                        <dt>Description lists</dt>
	                                        <dd>A description list is perfect for defining terms.</dd>
	                                    </dl>
	                                    <div class="m-t-sm">
	                                        <a href="#" class="text-muted"><i class="fa fa-gift"></i> Add gift package</a>
	                                        |
	                                        <a href="#" class="text-muted"><i class="fa fa-trash"></i> Remove item</a>
	                                    </div>
	                                </td>
	                                <td>
	                                    $700,00
	                                </td>
	                                <td width="65">
	                                    <input type="text" class="form-control" placeholder="1">
	                                </td>
	                                <td>
	                                    <h4>
	                                        $70,00
	                                    </h4>
	                                </td>
	                            </tr>
	                            </tbody>
	                        </table>
	                    </div>
	                </div> -->

	                <!-- bootdey.com -->

	                <div class="ibox-content">
	                    <button class="btn btn-primary pull-right"><i class="fa fa fa-shopping-cart"></i><a href="{% url 'checkout' %}">Checkout</a> </button>
	                    <a href="{% url 'products' %}"><button class="btn btn-white"><i class="fa fa-arrow-left"></i> Continue shopping</button></a>
	                </div>
	            </div>



	        </div>
	        <div class="col-md-3">
	            <div class="ibox">
	                <div class="ibox-title">
	                    <h5>Cart Summary</h5>
	                </div>
	                <div class="ibox-content">
	                    <span>
	                        Total
	                    </span>
	                    <h2 class="font-bold total_amount2">
	                        ${{ total|floatformat:2 }}
	                    </h2>

	                    <hr>
	                    <span class="text-muted small">
	                        *For United States, France and Germany applicable sales tax will be applied
	                    </span>
	                    <div class="m-t-sm">
	                        <div class="btn-group">
	                        <a href="{% url 'checkout' %}" class="btn btn-primary btn-sm"><i class="fa fa-shopping-cart"></i> Checkout</a>
	                        <a href="#" class="btn btn-white btn-sm"> Cancel</a>
	                        </div>
	                    </div>
	                </div>
	            </div>

	            <div class="ibox">
	                <div class="ibox-title">
	                    <h5>Support</h5>
	                </div>
	                <div class="ibox-content text-center">
	                    <h3><i class="fa fa-phone"></i> +43 100 783 001</h3>
	                    <span class="small">
	                        Please contact with us if you have any questions. We are avalible 24h.
	                    </span>
	                </div>
	            </div>

	            <div class="ibox">
	                <div class="ibox-content">

	                    <p class="font-bold">
	                    Other products you may be interested
	                    </p>
	                    <hr>
	                    <div>
	                        <a href="#" class="product-name"> Product 1</a>
	                        <div class="small m-t-xs">
	                            Many desktop publishing packages and web page editors now.
	                        </div>
	                        <div class="m-t text-righ">

	                            <a href="#" class="btn btn-xs btn-outline btn-primary">Info <i class="fa fa-long-arrow-right"></i> </a>
	                        </div>
	                    </div>
	                    <hr>
	                    <div>
	                        <a href="#" class="product-name"> Product 2</a>
	                        <div class="small m-t-xs">
	                            Many desktop publishing packages and web page editors now.
	                        </div>
	                        <div class="m-t text-righ">

	                            <a href="#" class="btn btn-xs btn-outline btn-primary">Info <i class="fa fa-long-arrow-right"></i> </a>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>
	</div>
	</div>
{% endblock content %}


{% block js_block %}
<script type="text/javascript">
	$(function(){

		$(document).on('click', '.quantity_inc', function(event){
			event.preventDefault();

			var _this = this;
			var product_id = $(this).attr("id");
			$.ajax({
				url: '{% url "cart.quantity.add" %}',
				method: "POST",
				dataType: "JSON",
				data: { csrfmiddlewaretoken: "{{ csrf_token }}" , 'product_id':product_id},
				success: function(data){

					if(data[0].success == true){

						$(_this).closest('div').find('.product_quantity_cls').val(data[0].data.product_quantity);
						$(_this).closest('tr').find('.product_total_cls').text("$"+(data[0].data.product_total).toFixed(2));
						$(".total_amount1").text("$"+(data[0].grand_total).toFixed(2));
						$(".total_amount2").text("$"+(data[0].grand_total).toFixed(2));

						$.alert({
							boxWidth: '30%',
							useBootstrap: false,

							animation: 'bottom',
							closeAnimation: 'top',

							icon: 'fa fa-check-circle',
						    title: data[0].message,
						    //content: '',
						    content: false,
						    type: 'green',
						    columnClass: 'small',
						    autoClose: 'ok|100',
						    buttons: { ok: { isHidden: true,  } }
						});

					}else{
						$.alert({
							boxWidth: '30%',
							useBootstrap: false,

							animation: 'bottom',
							closeAnimation: 'top',

							icon: 'fa fa-check-circle',
						    title: data[0].message,
						    //content: '',
						    content: false,
						    type: 'red',
						    columnClass: 'small',
						    autoClose: 'ok|100',
						    buttons: { ok: { isHidden: true,  } }
						});
					}
				},
				error: function(data){

				},
				complete: function(data){

				}
			});


		});

		$(document).on('click', '.quantity_desc', function(event){
			event.preventDefault();

			var _this = this;
			var product_id = $(this).attr("id");
			$.ajax({
				url: '{% url "cart.quantity.remove" %}',
				method: "POST",
				dataType: "JSON",
				data: { csrfmiddlewaretoken: "{{ csrf_token }}" , 'product_id':product_id},
				success: function(data){

					if(data[0].success == true){

						$(_this).closest('div').find('.product_quantity_cls').val(data[0].data.product_quantity);
						$(_this).closest('tr').find('.product_total_cls').text("$"+(data[0].data.product_total).toFixed(2));
						$(".total_amount1").text("$"+(data[0].grand_total).toFixed(2));
						$(".total_amount2").text("$"+(data[0].grand_total).toFixed(2));

						$.alert({
							boxWidth: '30%',
							useBootstrap: false,

							animation: 'bottom',
							closeAnimation: 'top',

							icon: 'fa fa-check-circle',
						    title: data[0].message,
						    //content: '',
						    content: false,
						    type: 'green',
						    columnClass: 'small',
						    autoClose: 'ok|100',
						    buttons: { ok: { isHidden: true,  } }
						});

					}else{
						$.alert({
							boxWidth: '30%',
							useBootstrap: false,

							animation: 'bottom',
							closeAnimation: 'top',

							icon: 'fa fa-check-circle',
						    title: data[0].message,
						    //content: '',
						    content: false,
						    type: 'red',
						    columnClass: 'small',
						    autoClose: 'ok|100',
						    buttons: { ok: { isHidden: true,  } }
						});
					}
				},
				error: function(data){

				},
				complete: function(data){

				}
			}); 

		});			

		$(document).on('click', '.remove_cart_item', function(event){
			event.preventDefault();
			var product_id = $(this).attr('id');

			$.ajax({
				url: '{% url "cart.remove" %}',
				method: "POST",
				dataType: "JSON",
				data: { csrfmiddlewaretoken: "{{ csrf_token }}" , 'product_id':product_id},
				success: function(data){
					//console.log("#cart_row_"+product_id);
					if(data[0].success == true){
						$(".cart_row_"+product_id).remove();
						$(".total_amount1").text("$"+(data[0].total).toFixed(2));
						$(".total_amount2").text("$"+(data[0].total).toFixed(2));
						$(".total_item_cls").html("(<strong>"+data[0].total_item+"</strong>) items");
						$.alert({
							boxWidth: '30%',
							useBootstrap: false,

							animation: 'bottom',
							closeAnimation: 'top',

							icon: 'fa fa-check-circle',
						    title: data[0].message,
						    //content: '',
						    content: false,
						    type: 'green',
						    columnClass: 'small',
						    autoClose: 'ok|100',
						    buttons: { ok: { isHidden: true,  } }
						});
					}else{
						$.alert({
							boxWidth: '30%',
							useBootstrap: false,

							animation: 'bottom',
							closeAnimation: 'top',

							icon: 'fa fa-check-circle',
						    title: data[0].message,
						    //content: '',
						    content: false,
						    type: 'red',
						    columnClass: 'small',
						    autoClose: 'ok|100',
						    buttons: { ok: { isHidden: true,  } }
						});
					}

					if(data[0].reload == true){
						setTimeout(function(){ location.reload(); }, 1000);
					}
				},
				error: function(data){

				},
				complete: function(data){

				}
			});
		});
	});
</script>
{% endblock js_block %}